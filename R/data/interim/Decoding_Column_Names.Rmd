---
title: "Decoding "
author: "Hugo Baca"
date: "2023-06-22"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
#
```{r}
# Script to create variable description
#
# The original data has two rows:
# 1. the long description and 2. the encoded name
# Output is 1 row dataframe of desc (row1) with column names (row2)
library(tidyverse)
desc = colnames(read_csv("../../../data/raw/analytic_data2023_0.csv", n_max=1))
enc = colnames(read_csv("../../../data/raw/analytic_data2023_0.csv", skip=1, n_max=1))

descriptions = data.frame(t(desc))
colnames(descriptions) = enc
row.names(descriptions) = "description"
saveRDS(descriptions, "../../../data/processed/colDesc_analysis2023.rds")

# Use case
descriptions %>% select(starts_with("v005_rawvalue"))
#                                   v005_rawvalue
#description Preventable Hospital Stays raw value
```
#Examples use case of description table
```{r}
descriptions %>% select(starts_with("v005_rawvalue"))
```

##tried to use descriptions, almost but not quite 
```{r}
ggplot(data_analytic_interim, aes(x = preventable_stays_col , y = income_inequality_col)) +
  geom_point(color = ifelse(data_analytic_interim$state == "CA", "red", "blue"), alpha = 0.3) +
  labs(x = "Preventable Hospital Stays raw value", y = "Income Inequality raw value") +
  theme_minimal()
```

